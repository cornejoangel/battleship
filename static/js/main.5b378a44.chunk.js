(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],{19:function(e,t,n){},20:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),i=n(14),a=n.n(i),c=n(3),s=n(60),l=n(17),u=n(61),h="ship",d=(n(19),n(0)),p=function(e){var t=e.type,n=e.x,r=e.y,o=e.name,i=e.player,a=e.attack,s=e.moveShip,l=e.canDropShip,p=e.recentX,f=e.recentY,m=n===p&&r===f,y=Object(u.a)((function(){return{accept:h,drop:function(e){return s(n,r,e)},canDrop:function(e){return l(n,r,e)},collect:function(e){return{isOver:!!e.isOver()}}}}),[n,r]),j=Object(c.a)(y,2),v=j[0].isOver,b=j[1];return"enemy"===o?Object(d.jsx)("button",{type:"button",className:"tile enemy-tile ".concat(t," ").concat(m?"recent-hit":""),onClick:function(e){return a(e,i,{x:n,y:r})}}):Object(d.jsx)("button",{type:"button",className:"tile ".concat(t," ").concat(m?"recent-hit":""," ").concat(v?"is-over":""),ref:b,style:{gridColumn:n+1,gridRow:r+1}})},f=(n(20),function(e){for(var t=e.player,n=e.name,r=e.tileSet,o=e.attack,i=e.moveShip,a=e.recentX,c=e.recentY,s=[],l=function(e){for(var t=function(t){var n={x:t,y:e},o=r.find((function(n){return n.x===t&&n.y===e}));n.type=o?o.type:"",s=s.concat(n)},n=0;n<10;n+=1)t(n)},u=0;u<10;u+=1)l(u);return"enemy"===n?Object(d.jsx)("div",{className:"grid ".concat(n," player").concat(t),children:s.map((function(e){return"ship"===e.type?Object(d.jsx)(p,{type:"",x:e.x,y:e.y,name:n,player:t,attack:o},"".concat(e.x).concat(e.y)):Object(d.jsx)(p,{type:e.type,x:e.x,y:e.y,name:n,player:t,attack:o},"".concat(e.x).concat(e.y))}))}):Object(d.jsx)("div",{className:"grid ".concat(n," player").concat(t),children:s.map((function(e){return Object(d.jsx)(p,{type:e.type,x:e.x,y:e.y,name:n,moveShip:i,recentX:a,recentY:c},"".concat(e.x).concat(e.y))}))})}),m=n(62),y=(n(34),function(e){e.x,e.y;var t=e.rotateShip,n=e.model,r=e.front;return Object(d.jsx)("div",{type:"button",role:"button",tabIndex:0,onClick:function(e){return t(e,n)},className:"tile ship ship-tile ".concat(r?"front":"back")})}),j=(n(35),function(e){var t=e.moveShip,n=e.rotateShip,r=e.x,o=e.y,i=e.length,a=e.orientation,s=e.model,l=e.inTray,u=Object(m.a)((function(){return{type:h,item:{length:i,model:s},collect:function(e){return{isDragging:!!e.isDragging()}}}})),p=Object(c.a)(u,2),f=p[0].isDragging,j=p[1],v=[],b={};v.push(Object(d.jsx)(y,{x:r,y:o,moveShip:t,rotateShip:n,model:s,front:!0},"".concat(r).concat(o)));for(var g=1;g<i;g+=1)"horizontal"===a?(b.x=r+g,b.y=o):(b.x=r,b.y=o+g),v.push(Object(d.jsx)(y,{x:b.x,y:b.y,moveShip:t,rotateShip:n,model:s,front:!1},"".concat(b.x).concat(b.y)));return"horizontal"===a?Object(d.jsx)("div",{className:"battleship horizontal ".concat(l?"".concat(s):""," ").concat(f?"dragging":""),ref:j,style:{gridColumnStart:r+1,gridColumnEnd:r+1+i,gridRowStart:o+1},children:v}):Object(d.jsx)("div",{className:"battleship vertical ".concat(l?"".concat(s):""," ").concat(f?"dragging":""),ref:j,style:{gridColumnStart:r+1,gridRowStart:o+1,gridRowEnd:o+1+i},children:v})}),v=function(e){for(var t=e.moveShip,n=e.rotateShip,r=e.gridShips,o=e.canDropShip,i=[],a=0;a<10;a+=1)for(var c=0;c<10;c+=1){var s={x:c,y:a};i=i.concat(s)}var l;return l=Object(d.jsxs)("div",{className:"grid friendly player1",children:[i.map((function(e){return Object(d.jsx)(p,{type:"",x:e.x,y:e.y,name:"",player:1,moveShip:t,canDropShip:o},"".concat(e.x).concat(e.y))})),r.map((function(e){return Object(d.jsx)(j,{moveShip:t,rotateShip:n,x:e.x,y:e.y,length:e.length,orientation:e.orientation,model:e.model},"".concat(e.x).concat(e.y))}))]}),l},b=(n(36),function(e){var t=e.reset;return Object(d.jsx)("button",{type:"button",className:"reset",onClick:t,children:"RESET"})}),g=n(27),x=n.n(g),O=(n(48),function(){var e=Object(r.useState)(!1),t=Object(c.a)(e,2),n=t[0],o=t[1],i=function(){o(!1)};return Object(d.jsxs)("div",{className:"info-container",children:[Object(d.jsx)("button",{type:"button",className:"info",onClick:function(){o(!0)},children:"info"}),Object(d.jsxs)(x.a,{isOpen:n,shouldCloseOnOverlayClick:!0,shouldCloseOnEsc:!0,onRequestClose:i,className:"info-content",overlayClassName:"info-overlay",portalClassName:"info-portal",children:[Object(d.jsx)("h2",{children:"This is an implementation of Battleship"}),Object(d.jsx)("p",{children:"Battleship is a 2 player game where each player places an identical set of ships onto a grid in whatever locations they choose. The players then take turns \"attacking\" specific tiles on their opponent's grid. When a tile that contains a section of a ship is attacked, that section of ship is damaged. If all of a ship's sections are damaged then that ship is sunk. The first player to sink all of their opponent's ships wins."}),Object(d.jsx)("h3",{className:"info-left",children:"How to Play"}),Object(d.jsx)("p",{className:"info-left",children:'First you must place your ships. You can drag them from their starting tray (on the right) over to the grid on the left by dragging their lighter colored end-tiles. You can also opt to use the appropriately labeled "randomize ships" button. Rotating ships is done by clicking on any part of a ship - provided the ship has clearance to rotate.'}),Object(d.jsx)("p",{className:"info-left",children:"Once the game begins you simply click on any tile from your enemy's grid to attack that tile. Your opponent will immediately counterattack and the result of both attacks will be shown below the grid. If you attempt to make a duplicate move, the game will reject it and wait for a new move. The game will end once all of either player's ships have been sunk. You may press the reset button at any time to start over."}),Object(d.jsx)("h3",{className:"info-right",children:"Your Opponent"}),Object(d.jsx)("p",{className:"info-left",children:"This game of Battleship is played against an AI opponent. The AI knows when it gets a hit and will probe the surrounding area trying to sink the rest of your ship. Don't underestimate your opponent!"}),Object(d.jsx)("button",{type:"button",className:"info close-info",onClick:i,children:"close"})]})]})}),S=(n(49),function(e){var t=e.randomShips;return Object(d.jsx)("button",{type:"button",className:"random",onClick:t,children:"Randomize ships"})}),w=(n(50),function(e){var t=e.playerResult,n=e.AIResult,r=e.gameOver;return r?Object(d.jsx)("div",{className:"message-container",children:Object(d.jsx)("div",{className:"game-over",children:r})}):Object(d.jsxs)("div",{className:"message-container",children:[Object(d.jsxs)("div",{children:["Your move: ",t]}),Object(d.jsxs)("div",{children:["Opponent's move: ",n]})]})}),k=(n(51),function(e){var t=e.startGame;return Object(d.jsxs)("button",{type:"button",className:"start",onClick:t,children:["Start",Object(d.jsx)("br",{}),"Game"]})}),N=(n(52),function(e){var t=e.moveShip,n=e.rotateShip,r=e.trayShips,o=e.startGame;return r.length>0?Object(d.jsx)("div",{className:"ship-tray",children:r.map((function(e){return Object(d.jsx)(j,{moveShip:t,rotateShip:n,x:e.x,y:e.y,length:e.length,orientation:e.orientation,model:e.model,inTray:true},e.model)}))}):Object(d.jsx)("div",{className:"ship-tray empty",children:Object(d.jsx)(k,{startGame:o})})}),M=function(e){var t=e,n=t;return{getLength:function(){return t},getHP:function(){return n},takeHit:function(){if(n>0)return n-=1},isSunk:function(){return 0===n}}},C=function(){var e=0,t=[],n=function(e){for(var n=function(n){return e[n].x>9||e[n].x<0||e[n].y>9||e[n].y<0||t.find((function(t){return t.x===e[n].x&&t.y===e[n].y}))?{v:!1}:void 0},r=0;r<e.length;r+=1){var o=n(r);if("object"===typeof o)return o.v}return!0};return{shipCount:function(){return e},addShip:function(r,o){if(!1===n(r))return!1;var i=M(r.length);e+=1;for(var a=0;a<r.length;a+=1){var c=r[a];c.type="ship",c.ship=i,c.model=o,t=t.concat(c)}return!0},checkShipLocation:n,removeShip:function(n){for(var r=t.length,o=function(e){t=t.filter((function(t){return!(t.x===n[e].x&&t.y===n[e].y)}))},i=0;i<n.length;i+=1)o(i);r>t.length&&(e-=1)},removeModel:function(n){t.length>(t=t.filter((function(e){return e.model!==n}))).length&&(e-=1)},receiveAttack:function(n){var r,o=t.find((function(e){return e.x===n.x&&e.y===n.y})),i=!1;return o&&"ship"===o.type?(t=t.map((function(e){return e.x===n.x&&e.y===n.y&&(e.type="hit",e.ship.takeHit(),i=e.ship.isSunk()),e})),i?(e-=1,void 0!==(r=o.model)&&(t=t.map((function(e){return e.model===r&&(e.type="sunk"),e}))),"sunk"):"hit"):o||n.x>9||n.x<0||n.y>9||n.y<0?"invalid":(n.type="miss",t=t.concat(n),"miss")},getTiles:function(){return t}}},T=function(){var e=C(),t=C(),n=function(){return e.shipCount()},r=function(){return t.shipCount()},o=function(){return n()<1?"player 2 wins!":r()<1&&"player 1 wins!"},i=function(n,r){var i="";return o()?"game over":(1===n?i=t.receiveAttack(r):2===n&&(i=e.receiveAttack(r)),o()&&1===n?"player 1 wins":o()&&2===n?"player 2 wins":i)};return{placeShips:function(){e.addShip([{x:1,y:3},{x:2,y:3},{x:3,y:3}]),e.addShip([{x:5,y:4},{x:5,y:5},{x:5,y:6},{x:5,y:7}]),t.addShip([{x:1,y:3},{x:2,y:3},{x:3,y:3}]),t.addShip([{x:5,y:4},{x:5,y:5},{x:5,y:6},{x:5,y:7}])},addShip:function(n,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=null;return 1===n?i=e.addShip(r,o):2===n&&(i=t.addShip(r,o)),i},removeShip:function(n,r){1===n?e.removeShip(r):2===n&&t.removeShip(r)},removeShipModel:function(n,r){1===n?e.removeModel(r):2===n&&t.removeModel(r)},checkLocation:function(n,r){return 1===n?e.checkShipLocation(r):2===n?t.checkShipLocation(r):void 0},playerOneShips:n,playerTwoShips:r,move:i,checkGameOver:o,smartMove:function(e,t,n,r){var o="",a=e,c=t,s=n,l=r;if("none"===t&&(o=i(2,e)),"up"===t?(Object.assign(a,r),a.y-=1,o=i(2,a)):"down"===t?(Object.assign(a,r),a.y+=1,o=i(2,a)):"left"===t?(Object.assign(a,r),a.x-=1,o=i(2,a)):"right"===t&&(Object.assign(a,r),a.x+=1,o=i(2,a)),"none"===t&&"hit"===o)Object.assign(s,a),Object.assign(l,a),c="up";else if("sunk"===o)c="none",s={},l={};else if("none"!==t&&"hit"!==o){switch(console.log(c),t){case"up":c="down";break;case"down":c="left";break;case"left":c="right";break;case"right":c="none"}Object.assign(l,s)}else"hit"===o&&Object.assign(l,a);return{result:o,newDirection:c,newSearching:s,newRecent:l,newCoords:a}},getPOneBoard:function(){return e.getTiles()},getPTwoBoard:function(){return t.getTiles()},reset:function(){e=C(),t=C()},resetPlayerOne:function(){e=C()},resetPlayerTwo:function(){t=C()}}},P=function(){var e=["horizontal","vertical"];return[{x:-1,y:-1,length:2,orientation:e[Math.round(Math.random())],model:"patrol"},{x:-1,y:-1,length:3,orientation:e[Math.round(Math.random())],model:"submarine"},{x:-1,y:-1,length:3,orientation:e[Math.round(Math.random())],model:"destroyer"},{x:-1,y:-1,length:4,orientation:e[Math.round(Math.random())],model:"battler"},{x:-1,y:-1,length:5,orientation:e[Math.round(Math.random())],model:"carrier"}]},R=(n(53),n(54),function(){var e=Object(r.useState)(T()),t=Object(c.a)(e,1)[0],n=Object(r.useState)(t.getPOneBoard()),o=Object(c.a)(n,2),i=o[0],a=o[1],u=Object(r.useState)(t.getPTwoBoard()),h=Object(c.a)(u,2),p=h[0],m=h[1],y=Object(r.useState)(!0),j=Object(c.a)(y,2),g=j[0],x=j[1],k=Object(r.useState)(P()),M=Object(c.a)(k,2),C=M[0],R=M[1],B=Object(r.useState)([]),D=Object(c.a)(B,2),z=D[0],Y=D[1],G=Object(r.useState)(""),I=Object(c.a)(G,2),A=I[0],L=I[1],E=Object(r.useState)(""),H=Object(c.a)(E,2),X=H[0],q=H[1],J=Object(r.useState)(!1),F=Object(c.a)(J,2),W=F[0],K=F[1],Q=Object(r.useState)("none"),U=Object(c.a)(Q,2),V=U[0],Z=U[1],$=Object(r.useState)({}),_=Object(c.a)($,2),ee=_[0],te=_[1],ne=Object(r.useState)({}),re=Object(c.a)(ne,2),oe=re[0],ie=re[1],ae=Object(r.useState)(-1),ce=Object(c.a)(ae,2),se=ce[0],le=ce[1],ue=Object(r.useState)(-1),he=Object(c.a)(ue,2),de=he[0],pe=he[1],fe=Object(r.useRef)(),me=Object(r.useRef)();fe.current=C,me.current=z;var ye=Object(r.useRef)(),je=Object(r.useRef)(),ve=Object(r.useRef)();ye.current=V,je.current=ee,ve.current=oe;var be=function(){return{x:Math.floor(10*Math.random()),y:Math.floor(10*Math.random())}},ge=function(e){for(var t=e.x,n=e.y,r=e.length,o=e.orientation,i=[],a=0,c=0,s=0;s<r;s+=1)"horizontal"===o?(a=t+s,c=n):(a=t,c=n+s),i.push({x:a,y:c});return i},xe=function(e){var t=me.current.find((function(t){return t.model===e})),n=fe.current.find((function(t){return t.model===e}));return!0===!!t&&!1===!!n?t.orientation:!1===!!t&&!0===!!n?n.orientation:void 0},Oe=function(e,n,r){var o=r.length,i=r.model,c={x:e,y:n,length:o,model:i};c.orientation=xe(i),R((function(e){return e.filter((function(e){return e.model!==i}))})),Y((function(e){return e.filter((function(e){return e.model!==c.model}))})),Y((function(e){return e.concat(c)})),t.removeShipModel(1,c.model);var s=ge(c);t.addShip(1,s,c.model),a(t.getPOneBoard())},Se=function(e,n){e.preventDefault();var r=C.map((function(e){return e.model===n&&"horizontal"===e.orientation?e.orientation="vertical":e.model===n&&"vertical"===e.orientation&&(e.orientation="horizontal"),e})),o=z,i=o.find((function(e){return e.model===n}));i||(i=r.find((function(e){return e.model===n})));var c=i.orientation,s=ge(i);"horizontal"===i.orientation?i.orientation="vertical":"vertical"===i.orientation&&(i.orientation="horizontal");var l=ge(i);t.removeShipModel(1,n),!0===t.checkLocation(1,l)?t.addShip(1,l,n):(i.orientation=c,t.addShip(1,s,n)),R(r),Y(o),a(t.getPOneBoard())},we=function(){t.reset(),a(t.getPOneBoard()),m(t.getPTwoBoard()),R(P()),Y([]),x(!0),K(!1),L(""),q(""),le(-1),pe(-1)},ke=function(e){1===e?t.resetPlayerOne():2===e&&t.resetPlayerTwo();for(var n=["horizontal","vertical"],r=[{length:2,model:"patrol"},{length:3,model:"submarine"},{length:3,model:"destroyer"},{length:4,model:"battler"},{length:5,model:"carrier"}],o=[],i=0;i<r.length;i+=1){var a=!0;do{var c=be();r[i].x=c.x,r[i].y=c.y,r[i].orientation=n[Math.round(Math.random())];var s=ge(r[i]);a=!t.addShip(e,s,r[i].model)}while(a);o.push(r[i])}return o};return g?Object(d.jsx)(s.a,{backend:l.a,children:Object(d.jsxs)("main",{children:[Object(d.jsxs)("ul",{className:"tray-info",children:[Object(d.jsx)("li",{children:"click to rotate"}),Object(d.jsx)("li",{children:"use the lighter-colored squares to drag and drop"})]}),Object(d.jsx)(N,{moveShip:Oe,rotateShip:Se,trayShips:C,startGame:function(){x(!1),ke(2),m(t.getPTwoBoard()),console.log(t.getPTwoBoard())}}),Object(d.jsx)("h2",{className:"friendly-heading",children:"place your ships"}),Object(d.jsx)(v,{moveShip:Oe,rotateShip:Se,gridShips:z,canDropShip:function(e,n,r){var o=r.length,i=r.model,a={x:e,y:n,length:o,model:i};a.orientation=xe(i);var c=ge(a),s=function(e){var t=me.current.find((function(t){return t.model===e})),n=fe.current.find((function(t){return t.model===e}));return!0===!!t&&!1===!!n?ge(t):!1===!!t&&!0===!!n?ge(n):void 0}(i);t.removeShipModel(1,a.model);var l=t.checkLocation(1,c);return t.addShip(1,s,i),l}}),Object(d.jsx)(b,{reset:we}),Object(d.jsx)(O,{}),Object(d.jsx)(S,{randomShips:function(){var e=ke(1);R([]),Y(e),a(t.getPOneBoard()),m(t.getPTwoBoard())}})]})}):Object(d.jsx)(s.a,{backend:l.a,children:Object(d.jsxs)("main",{children:[Object(d.jsx)("h2",{className:"enemy-heading",children:"enemy waters"}),Object(d.jsx)(f,{player:1,name:"enemy",tileSet:p,attack:function(e,n,r){e.preventDefault();var o="",i={result:X,newDirection:V,newSearching:je.current,newRecent:ve.current,newCoords:{x:se,y:de}};if(W||(o=t.move(n,r)),"invalid"===o||W)W?(o=t.checkGameOver(),i.result=t.checkGameOver()):o="invalid - select a new target";else do{var c,s,l,u;i="invalid"===(null===(c=i)||void 0===c?void 0:c.result)&&"down"===i.newDirection?t.smartMove(be(),"down",je.current,ve.current):"invalid"===(null===(s=i)||void 0===s?void 0:s.result)&&"left"===i.newDirection?t.smartMove(be(),"left",je.current,ve.current):"invalid"===(null===(l=i)||void 0===l?void 0:l.result)&&"right"===i.newDirection?t.smartMove(be(),"right",je.current,ve.current):"invalid"===(null===(u=i)||void 0===u?void 0:u.result)&&"none"===i.newDirection?t.smartMove(be(),"none",je.current,ve.current):t.smartMove(be(),ye.current,je.current,ve.current)}while("invalid"===i.result);var h=t.checkGameOver(),d=i.newCoords.x,p=i.newCoords.y;le(d),pe(p),K(h),L(o),q(i.result),Z(i.newDirection),te(i.newSearching),ie(i.newRecent),a(t.getPOneBoard()),m(t.getPTwoBoard())}}),Object(d.jsx)("h2",{className:"friendly-heading",children:"friendly waters"}),Object(d.jsx)(f,{player:1,name:"friendly",tileSet:i,recentX:se,recentY:de}),Object(d.jsx)(w,{playerResult:A,AIResult:X,gameOver:W}),Object(d.jsx)(b,{reset:we}),Object(d.jsx)(O,{})]})})});a.a.render(Object(d.jsx)(o.a.StrictMode,{children:Object(d.jsx)(R,{})}),document.getElementById("root"))}},[[55,1,2]]]);
//# sourceMappingURL=main.5b378a44.chunk.js.map